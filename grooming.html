<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0 maximum-scale=5.0">
    <title>Grooming - Prevenci√≥n y Casos Reales</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* --- ESTILOS SIMULADOR --- */
        .platform-badge { 
            padding: 4px 10px; 
            border-radius: 6px; 
            font-size: 0.75rem; 
            font-weight: bold; 
            margin-bottom: 10px; 
            display: inline-block; 
            text-transform: uppercase; 
        }
        .android { background: #3DDC84; color: #073042; }
        .ios { background: #f5f5f7; color: #1d1d1f; }
        .windows { background: #0078d4; color: white; }
        
        .score-board { 
            position: sticky; 
            top: 80px; 
            background: var(--bg-card); 
            padding: 15px; 
            border-radius: 12px; 
            border: 2px solid var(--danger); 
            text-align: center; 
            z-index: 99; 
            margin: 20px 0; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.5); 
            transition: all 0.3s ease;
        }
        
        .score-text { 
            font-size: 1.2rem; 
            font-weight: bold; 
            color: var(--danger); 
        }
        
        .question { 
            background: rgba(255,255,255,0.03); 
            padding: 25px; 
            border-radius: 16px; 
            margin-bottom: 25px; 
            border: 1px solid rgba(255,255,255,0.1); 
            transition: all 0.3s ease;
        }
        
        .options button { 
            display: block; 
            width: 100%; 
            text-align: left; 
            padding: 14px; 
            margin: 10px 0; 
            background: rgba(0,0,0,0.3); 
            border: 1px solid rgba(255,255,255,0.1); 
            color: var(--text-main); 
            border-radius: 10px; 
            cursor: pointer; 
            transition: 0.3s; 
            font-family: 'Poppins', sans-serif; 
        }
        
        .options button:hover { 
            background: rgba(239, 68, 68, 0.1); 
            border-color: var(--danger); 
        }
        
        .feedback { 
            font-weight: 600; 
            margin-top: 15px; 
            display: none; 
            padding: 12px; 
            border-radius: 8px; 
            font-size: 0.95rem; 
            line-height: 1.4; 
        }
        
        .correct { 
            color: var(--success); 
            background: rgba(74, 222, 128, 0.1); 
            border: 1px solid var(--success); 
        }
        
        .incorrect { 
            color: var(--danger); 
            background: rgba(248, 113, 113, 0.1); 
            border: 1px solid var(--danger); 
        }
        
        /* --- INFORMACI√ìN --- */
        .info-card { 
            background: rgba(255,255,255,0.05); 
            padding: 25px; 
            border-radius: 15px; 
            margin-bottom: 20px; 
            border-top: 3px solid var(--danger); 
        }
        
        .alert-box { 
            background: rgba(239, 68, 68, 0.1); 
            padding: 20px; 
            border-radius: 10px; 
            border: 1px solid var(--danger); 
            margin: 20px 0; 
        }
        
        /* --- ESTILOS AYUDA Y CONTACTO --- */
        .help-section {
            background: rgba(239, 68, 68, 0.15);
            border-radius: 15px;
            padding: 25px;
            margin-top: 50px;
            border: 1px solid var(--danger);
        }
        
        .contact-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 15px;
        }
        
        .contact-item { 
            font-weight: bold; 
            color: #fff; 
        }
        
        .contact-item span { 
            display: block; 
            font-weight: normal; 
            color: #fca5a5; 
            font-size: 0.9rem; 
        }
        
        /* --- ESTILOS DEL BLOG EN CUADRADOS --- */
        #blog-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .post-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            cursor: pointer;
            transition: transform 0.3s ease, border-color 0.3s ease;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            min-height: 220px;
        }
        
        .post-card:hover {
            transform: translateY(-5px);
            border-color: var(--danger);
            background: rgba(239, 68, 68, 0.05);
        }
        
        .post-card h3 { 
            color: var(--danger); 
            font-size: 1.2rem; 
            margin: 0 0 10px 0; 
        }
        
        .post-card p { 
            font-size: 0.9rem; 
            color: #ccc; 
            overflow: hidden; 
            display: -webkit-box; 
            -webkit-box-orient: vertical; 
            line-height: 1.4;
            height: 4.2em;
        }
        
        .leer-mas { 
            font-size: 0.8rem; 
            color: var(--danger); 
            font-weight: bold; 
            margin-top: 15px; 
            text-transform: uppercase; 
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .blog-controls {
            display: flex;
            gap: 15px;
            margin: 20px 0;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .blog-stats {
            font-size: 0.9rem;
            color: var(--text-muted);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-muted);
            grid-column: 1 / -1;
        }
        
        .empty-state-icon {
            font-size: 4rem;
            margin-bottom: 20px;
            opacity: 0.5;
        }
        
        .loading-posts {
            text-align: center;
            padding: 40px;
            color: var(--text-muted);
            grid-column: 1 / -1;
        }
        
        .spinner {
            border: 3px solid rgba(255,255,255,0.1);
            border-top: 3px solid var(--primary);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <header>
        <h1>Prevenci√≥n de Grooming</h1>
        <p>Identifica las se√±ales y protege a los m√°s vulnerables en la red</p>
    </header>

    <nav>
        <a href="index.html"><i class="fas fa-home"></i> Inicio</a>
        <a href="phishing.html"><i class="fas fa-fish"></i> Phishing</a>
        <a href="ciberseguridad.html"><i class="fas fa-shield-alt"></i> Ciberseguridad</a>
        <a href="videojuegos.html"><i class="fas fa-gamepad"></i> Videojuegos</a>
        <a href="redes.html"><i class="fas fa-users"></i> Redes Sociales</a>
        <a href="grooming.html" class="active"><i class="fas fa-exclamation-triangle"></i> Grooming</a>
        <a href="https://pablogalvan22.github.io/NoticiasSanIsidro/" target="_blank" rel="noopener noreferrer">
            <i class="fas fa-newspaper"></i> Noticias para la Comunidad
        </a>
        <a href="admin.html" style="margin-left: auto; background: rgba(239, 68, 68, 0.1);">
            <i class="fas fa-lock"></i> Admin
        </a>
    </nav>

    <div class="container">
        <h2><i class="fas fa-search"></i> ¬øQu√© es el Grooming y c√≥mo detectarlo?</h2>
        <p>Grooming es una pr√°ctica delictiva en la que un adulto establece una relaci√≥n de confianza con un ni√±o, ni√±a o adolescente a trav√©s de medios digitales, como redes sociales, chats o juegos en l√≠nea, con el fin de abusar sexualmente de ellos. El acosador suele falsificar su identidad, present√°ndose como alguien de edad similar, y utiliza el enga√±o, la manipulaci√≥n emocional y el chantaje para ganarse la confianza de la v√≠ctima. Este proceso puede durar semanas o meses y generalmente se divide en etapas: enganche, fidelizaci√≥n, seducci√≥n y acoso sexual, con el objetivo de obtener material √≠ntimo o lograr un encuentro f√≠sico. Es un delito penado en muchos pa√≠ses, incluido Argentina desde 2013, y representa una de las principales amenazas en el entorno digital para la seguridad de los menores.</p>
        
        <div class="info-card">
            <h3><i class="fas fa-handshake"></i> La t√©cnica del "Amigo Ideal"</h3>
            <p>El acosador suele ser paciente. Valida sentimientos ("Tus padres no te entienden") y ofrece regalos (skins, diamantes) para crear una deuda emocional y de lealtad.</p>
        </div>

        <div class="info-card">
            <h3><i class="fas fa-exclamation-circle"></i> De la Amistad a la Sextorsi√≥n</h3>
            <p>Una pr√°ctica ligada es la <strong>Sextorsi√≥n</strong>: tras convencer al menor de enviar una foto √≠ntima, el adulto amenaza con difundirla para obligarlo a peticiones m√°s graves. Nunca cedas al chantaje.</p>
        </div>

        <div class="info-card">
            <h3><i class="fas fa-flag"></i> Se√±ales Cr√≠ticas de Alerta</h3>
            <ul>
                <li>Insistencia en que la relaci√≥n sea un "secreto compartido".</li>
                <li>Intentos constantes de mover la charla a apps privadas fuera de supervisi√≥n.</li>
                <li>Preguntas sobre vestimenta o si el menor se encuentra solo en casa.</li>
                <li>Cambios repentinos en el comportamiento o humor del menor.</li>
            </ul>
        </div>

        <div class="alert-box">
            <h3><i class="fas fa-first-aid"></i> Primeros Auxilios Digitales</h3>
            <p>Si sospechas de un caso: <strong>1. No borres evidencia</strong> (mensajes/fotos). <strong>2. No cedas al chantaje</strong> (les da m√°s poder). <strong>3. Habla</strong> con un adulto de confianza o autoridad de inmediato.</p>
        </div>

        <hr>

        <h2><i class="fas fa-newspaper"></i> Historias y Alertas Recientes</h2>
        <p>Casos reportados para prevenir a la comunidad. Haz clic para leer el detalle.</p>
        
        <div class="blog-controls">
            <div class="blog-stats">
                <span id="post-count">0</span> historias publicadas
            </div>
            <div style="margin-left: auto; display: flex; gap: 10px;">
                <button id="sort-posts" class="btn-secondary" style="padding: 8px 15px; font-size: 0.9rem;">
                    <i class="fas fa-sort-amount-down"></i> Ordenar
                </button>
                <button id="refresh-posts" style="padding: 8px 15px; font-size: 0.9rem;">
                    <i class="fas fa-sync-alt"></i> Actualizar
                </button>
            </div>
        </div>

        <div id="blog-container">
            <div class="loading-posts">
                <div class="spinner"></div>
                <p>Cargando historias de la comunidad...</p>
            </div>
        </div>

        <hr>

        <div class="score-board">
            <div class="score-text">Detecci√≥n de Riesgos: <span id="puntos">0</span>/12 | <span id="porcentaje">0</span>% Seguro</div>
        </div>

        <h2><i class="fas fa-tools"></i> Test de Prevenci√≥n Integral</h2>

        <div class="platform-badge android"><i class="fab fa-android"></i> Android</div>
        <div class="question">
            <p><strong>1. Un usuario de un juego m√≥vil te pide tu WhatsApp para "regalarte diamantes".</strong></p>
            <div class="options">
                <button class="opt" data-status="correct" data-msg="¬°CORRECTO! Mover la charla a medios privados es la primera t√°ctica para iniciar el acoso.">No d√°rselo. Seguir√© hablando por el chat del juego.</button>
                <button class="opt" data-status="incorrect" data-msg="ERROR: Tu n√∫mero es privado y permite que el acosador te contacte sin supervisi√≥n.">D√°rselo, necesito los diamantes.</button>
            </div>
            <div class="feedback"></div>
        </div>
        <div class="question">
            <p><strong>2. Alguien online te pide borrar los mensajes despu√©s de hablar "para que nadie nos moleste".</strong></p>
            <div class="options">
                <button class="opt" data-status="correct" data-msg="¬°CORRECTO! El secreto y el borrado de evidencia son se√±ales claras de grooming.">No hacerlo. Los secretos en internet son peligrosos.</button>
                <button class="opt" data-status="incorrect" data-msg="ERROR: Borrar mensajes ayuda al acosador a ocultar pruebas ante tus padres.">Aceptar para proteger nuestra amistad secreta.</button>
            </div>
            <div class="feedback"></div>
        </div>
        <div class="question">
            <p><strong>3. Una persona te pide una foto de tu cuerpo para "ver si haces ejercicio".</strong></p>
            <div class="options">
                <button class="opt" data-status="correct" data-msg="¬°CORRECTO! Nadie honesto te pedir√° fotos privadas. Es acoso directo.">Bloquear de inmediato. Es una solicitud inapropiada.</button>
                <button class="opt" data-status="incorrect" data-msg="ERROR: Una vez enviada una foto √≠ntima, se usar√° para extorsionarte.">Mandarla si √©l manda una primero.</button>
            </div>
            <div class="feedback"></div>
        </div>
        <div class="question">
            <p><strong>4. ¬øQu√© haces si un amigo de internet sabe d√≥nde estudias sin que t√∫ se lo dijeras?</strong></p>
            <div class="options">
                <button class="opt" data-status="correct" data-msg="¬°CORRECTO! Indica que te estuvo investigando (Cyberstalking). Es un riesgo real.">Avisar a mis padres inmediatamente. Es una se√±al de acecho.</button>
                <button class="opt" data-status="incorrect" data-msg="ERROR: Si conoce tu escuela sin permiso, corres peligro f√≠sico.">Ignorarlo y seguir siendo amigos.</button>
            </div>
            <div class="feedback"></div>
        </div>

        <div class="platform-badge ios"><i class="fab fa-apple"></i> iOS</div>
        <div class="question">
            <p><strong>1. Alguien que dice tener tu edad te pide hacer videollamada a escondidas de noche.</strong></p>
            <div class="options">
                <button class="opt" data-status="correct" data-msg="¬°CORRECTO! Las videollamadas nocturnas a escondidas son t√°cticas de manipulaci√≥n emocional.">Rechazar. Solo hago videollamadas con gente que conozco en persona.</button>
                <button class="opt" data-status="incorrect" data-msg="ERROR: El video puede ser grabado sin tu permiso para extorsionarte luego.">Aceptar, as√≠ nos conocemos mejor.</button>
            </div>
            <div class="feedback"></div>
        </div>
        <div class="question">
            <p><strong>2. Recibes una solicitud en Instagram de un perfil atractivo pero sin amigos en com√∫n.</strong></p>
            <div class="options">
                <button class="opt" data-status="correct" data-msg="¬°CORRECTO! Los perfiles 'atractivos' sin conexiones reales suelen ser falsos.">Rechazar. No acepto a gente que no tiene conexiones reales conmigo.</button>
                <button class="opt" data-status="incorrect" data-msg="ERROR: Aceptar extra√±os facilita que obtengan informaci√≥n sobre tu ubicaci√≥n.">Aceptar, se ve como buena persona.</button>
            </div>
            <div class="feedback"></div>
        </div>
        <div class="question">
            <p><strong>3. Alguien te dice que si dejas de hablarle se har√° da√±o "por tu culpa".</strong></p>
            <div class="options">
                <button class="opt" data-status="correct" data-msg="¬°CORRECTO! Es manipulaci√≥n emocional extrema para controlarte.">Es un chantaje. Contarlo a un adulto de confianza y bloquear.</button>
                <button class="opt" data-status="incorrect" data-msg="ERROR: No eres responsable de las emociones de un extra√±o.">Seguir habl√°ndole por l√°stima.</button>
            </div>
            <div class="feedback"></div>
        </div>
        <div class="question">
            <p><strong>4. ¬øEs seguro conocer a alguien online en un lugar p√∫blico si vas solo?</strong></p>
            <div class="options">
                <button class="opt" data-status="correct" data-msg="¬°CORRECTO! Nunca vayas solo. Las personas pueden mentir sobre su identidad por a√±os.">No. Jam√°s te re√∫nas con extra√±os de internet sin tus padres.</button>
                <button class="opt" data-status="incorrect" data-msg="ERROR: Es el riesgo m√°s cr√≠tico de seguridad f√≠sica. El lugar p√∫blico no garantiza nada.">S√≠, mientras sea un parque con gente.</button>
            </div>
            <div class="feedback"></div>
        </div>

        <div class="platform-badge windows"><i class="fab fa-windows"></i> Windows</div>
        <div class="question">
            <p><strong>1. Un usuario de Discord te pide transmitir pantalla mientras est√°s en tu habitaci√≥n.</strong></p>
            <div class="options">
                <button class="opt" data-status="correct" data-msg="¬°CORRECTO! Tu privacidad es sagrada. No cedas a exhibirte ante desconocidos.">Cerrar la llamada y reportar el abuso inmediatamente.</button>
                <button class="opt" data-status="incorrect" data-msg="ERROR: Est√°s permitiendo acceso visual a tu espacio √≠ntimo a un extra√±o.">Hacerlo un momento para que no se enoje.</button>
            </div>
            <div class="feedback"></div>
        </div>
        <div class="question">
            <p><strong>2. Te env√≠an un link a una "App de chat secreta" para hablar fuera de reglas familiares.</strong></p>
            <div class="options">
                <button class="opt" data-status="correct" data-msg="¬°CORRECTO! Las apps no oficiales se usan para ocultar delitos y malware.">No descargarla. Las apps 'secretas' son peligrosas.</button>
                <button class="opt" data-status="incorrect" data-msg="ERROR: Puede ser un virus para activar tu c√°mara o micr√≥fono remotamente.">Probarla para ver qu√© tiene.</button>
            </div>
            <div class="feedback"></div>
        </div>
        <div class="question">
            <p><strong>3. ¬øQu√© haces si un extra√±o de internet env√≠a regalos o comida a tu domicilio f√≠sico?</strong></p>
            <div class="options">
                <button class="opt" data-status="correct" data-msg="¬°CORRECTO! Es una se√±al grave de acecho; conocen tu ubicaci√≥n real.">No aceptarlo y avisar a mis padres de inmediato.</button>
                <button class="opt" data-status="incorrect" data-msg="ERROR: Los regalos se usan para crear sentimientos de deuda.">Recibirlo y darle las gracias por ser tan detallista.</button>
            </div>
            <div class="feedback"></div>
        </div>
        <div class="question">
            <p><strong>4. Te amenazan con publicar un secreto tuyo si no haces lo que el acosador pide.</strong></p>
            <div class="options">
                <button class="opt" data-status="correct" data-msg="¬°CORRECTO! El chantaje no se detiene cediendo; se detiene pidiendo ayuda legal.">No ceder. Pedir ayuda a un adulto y denunciar a la autoridad.</button>
                <button class="opt" data-status="incorrect" data-msg="ERROR: Si cedes una vez, las peticiones ser√°n cada vez m√°s graves.">Hacerlo una √∫ltima vez para que se detenga.</button>
            </div>
            <div class="feedback"></div>
        </div>

        <hr>

        <section class="help-section">
            <h2><i class="fas fa-life-ring"></i> Directorio de Ayuda y Denuncia</h2>
            <p style="color: #fca5a5; margin-bottom: 20px;">Si est√°s en peligro o conoces a alguien que lo est√©, contacta inmediatamente:</p>
            <div class="contact-grid">
                <div class="contact-item">Emergencias Nacionales <span><i class="fas fa-phone"></i> 555 242 5100 (Polic√≠a)</span></div>
                <div class="contact-item">Polic√≠a Cibern√©tica <span><i class="fas fa-envelope"></i> policia.cibernetica@ssc.cdmx.gob.mx</span></div>
                <div class="contact-item">Denuncia de Abuso Online <span><i class="fas fa-globe"></i> groominglatam.org</span></div>
                <div class="contact-item">L√≠nea de Ayuda Infantil <span><i class="fas fa-phone"></i> 800 123 4567</span></div>
            </div>
        </section>
    </div>

    <script type="module">
        // Importar funciones necesarias de firebase.js
        import { 
            getPosts, 
            getTotalPosts, 
            formatDate 
        } from './firebase.js';

        // Variables para ordenar posts
        let currentSort = 'desc';
        let isLoading = false;

        // CARGAR BLOG EN CUADRADOS
        const cargarBlog = async () => {
            if (isLoading) return;
            
            const container = document.getElementById('blog-container');
            try {
                isLoading = true;
                container.innerHTML = `
                    <div class="loading-posts">
                        <div class="spinner"></div>
                        <p>Cargando historias de la comunidad...</p>
                    </div>
                `;
                
                const querySnapshot = await getPosts(currentSort);
                container.innerHTML = '';
                
                // Actualizar contador
                const totalPosts = await getTotalPosts();
                document.getElementById('post-count').textContent = totalPosts;
                
                if (querySnapshot.empty) {
                    container.innerHTML = `
                        <div class="empty-state">
                            <div class="empty-state-icon">üìù</div>
                            <h3>No hay historias publicadas a√∫n</h3>
                            <p>S√© el primero en compartir un caso o alerta importante.</p>
                            <a href="admin.html" style="margin-top: 20px; display: inline-block;" class="btn-secondary">
                                <i class="fas fa-plus"></i> Publicar primera historia
                            </a>
                        </div>
                    `;
                    isLoading = false;
                    return;
                }
                
                let postIndex = 0;
                querySnapshot.forEach((doc) => {
                    const d = doc.data();
                    const card = document.createElement('div');
                    card.className = 'post-card';
                    
                    const extracto = d.contenido.length > 120 ? 
                        d.contenido.substring(0, 120) + "..." : 
                        d.contenido;
                    
                    const fecha = formatDate(d.fecha) || "Reciente";
                    
                    card.innerHTML = `
                        <div>
                            <h3>${d.titulo}</h3>
                            <p>${extracto}</p> 
                        </div>
                        <div>
                            <div class="post-meta">
                                <div><i class="far fa-calendar"></i> ${fecha.split(' ')[0]}</div>
                                <div class="post-stats">
                                    <span class="stat-item"><i class="far fa-thumbs-up"></i> ${d.likes || 0}</span>
                                    <span class="stat-item"><i class="far fa-thumbs-down"></i> ${d.dislikes || 0}</span>
                                </div>
                            </div>
                            <div class="leer-mas">Leer historia completa <i class="fas fa-arrow-right"></i></div>
                        </div>
                    `;
                    card.onclick = () => window.location.href = `post-detalle.html?id=${doc.id}`;
                    container.appendChild(card);
                    
                    // A√±adir efecto de aparici√≥n escalonada
                    card.style.opacity = '0';
                    card.style.transform = 'translateY(20px)';
                    setTimeout(() => {
                        card.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
                        card.style.opacity = '1';
                        card.style.transform = 'translateY(0)';
                    }, postIndex * 100);
                    postIndex++;
                });
                
            } catch(e) { 
                console.error("Error al cargar blog:", e);
                container.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: var(--danger);">
                        <h3><i class="fas fa-exclamation-triangle"></i> Error al cargar las historias</h3>
                        <p>${e.message || "Intenta recargar la p√°gina o verifica tu conexi√≥n."}</p>
                        <button onclick="cargarBlog()" style="margin-top: 15px;">
                            <i class="fas fa-redo"></i> Reintentar
                        </button>
                    </div>
                `; 
            } finally {
                isLoading = false;
            }
        };

        // Bot√≥n para refrescar posts
        document.getElementById('refresh-posts').addEventListener('click', () => {
            const btn = document.getElementById('refresh-posts');
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Actualizando...';
            btn.disabled = true;
            
            cargarBlog().finally(() => {
                setTimeout(() => {
                    btn.innerHTML = '<i class="fas fa-sync-alt"></i> Actualizar';
                    btn.disabled = false;
                }, 1000);
            });
        });

        // Bot√≥n para ordenar posts
        document.getElementById('sort-posts').addEventListener('click', () => {
            currentSort = currentSort === 'desc' ? 'asc' : 'desc';
            const btn = document.getElementById('sort-posts');
            btn.innerHTML = currentSort === 'desc' 
                ? '<i class="fas fa-sort-amount-down"></i> M√°s recientes primero'
                : '<i class="fas fa-sort-amount-up"></i> M√°s antiguos primero';
            
            cargarBlog();
        });

        // L√ìGICA DEL TEST (SCORE)
        let corr = 0; 
        let resp = 0;
        
        document.querySelectorAll('.opt').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const parent = e.target.closest('.question');
                const feed = parent.querySelector('.feedback');
                resp++;
                
                feed.innerText = e.target.getAttribute('data-msg');
                feed.style.display = 'block';
                
                if(e.target.getAttribute('data-status') === 'correct') {
                    feed.className = 'feedback correct'; 
                    corr++;
                } else { 
                    feed.className = 'feedback incorrect'; 
                }
                
                document.getElementById('puntos').innerText = corr;
                const porcentaje = Math.round((corr/resp)*100);
                document.getElementById('porcentaje').innerText = porcentaje;
                
                // Deshabilitar botones de esta pregunta
                parent.querySelectorAll('.opt').forEach(b => { 
                    b.style.pointerEvents = 'none'; 
                    b.style.opacity = '0.5'; 
                });
                
                // Actualizar score-board visualmente
                const scoreBoard = document.querySelector('.score-board');
                
                if (porcentaje >= 75) {
                    scoreBoard.style.borderColor = 'var(--success)';
                    scoreBoard.style.boxShadow = '0 10px 30px rgba(74, 222, 128, 0.3)';
                    scoreBoard.querySelector('.score-text').style.color = 'var(--success)';
                } else if (porcentaje >= 50) {
                    scoreBoard.style.borderColor = 'var(--warning)';
                    scoreBoard.style.boxShadow = '0 10px 30px rgba(245, 158, 11, 0.3)';
                    scoreBoard.querySelector('.score-text').style.color = 'var(--warning)';
                } else {
                    scoreBoard.style.borderColor = 'var(--danger)';
                    scoreBoard.style.boxShadow = '0 10px 30px rgba(239, 68, 68, 0.3)';
                    scoreBoard.querySelector('.score-text').style.color = 'var(--danger)';
                }
                
                // Agregar animaci√≥n de acierto/error
                if (e.target.getAttribute('data-status') === 'correct') {
                    parent.style.borderColor = 'var(--success)';
                    parent.style.boxShadow = '0 5px 15px rgba(74, 222, 128, 0.2)';
                } else {
                    parent.style.borderColor = 'var(--danger)';
                    parent.style.boxShadow = '0 5px 15px rgba(239, 68, 68, 0.2)';
                }
            });
        });

        // Inicializar
        document.addEventListener('DOMContentLoaded', () => {
            cargarBlog();
            
            // Inicializar bot√≥n de ordenar
            document.getElementById('sort-posts').innerHTML = 
                '<i class="fas fa-sort-amount-down"></i> M√°s recientes primero';
        });
    </script>
</body>
</html>